---
title: "Ultravox SDK"
sidebar:
  order: 0
---

import { Tabs, TabItem } from '@astrojs/starlight/components';
import SDKCards from '../../components/SDKCards.astro';

The Ultravox [REST API](../api/auth/) is used to create calls but you must use one of the Ultravox client SDKs to join and end calls. This page primarily uses examples in JavaScript. The concepts are the same across all the [different SDK implementations](#sdk-implementations).

## Ultravox Session
The core of the SDK is the `UltravoxSession`. The session is used to join and leave calls.

<Tabs syncKey="example-language">
  <TabItem label="JavaScript">
    ```js
    import { UltravoxSession } from 'ultravox-client';

    const session = new UltravoxSession();
    const state = await session.joinCall('wss://your-call-join-url');

    session.leaveCall();
    ```
  </TabItem>

  <TabItem label="Flutter">
    ```dart
    import 'package:ultravox_client/ultravox_client.dart';

    UltravoxSession session = UltravoxSession.create();
    UltravoxSessionState state = await _session.joinCall('wss://your-call-join-url');

    await session.leaveCall();
    ```
  </TabItem>

  <TabItem label="Kotlin">
    ```kotlin
    import ai.ultravox.UltravoxSession

    val session = UltravoxSession()
    val state = session.joinCall("wss://your-call-join-url")

    session.leaveCall()
    ```
  </TabItem>

  <TabItem label="Python">
    ```python
    import asyncio
    import ultravox_client as uv

    session = uv.UltravoxSession()
    state = await session.join_call("wss://your-call-join-url")

    await session.leave_call()
    ```
  </TabItem>
</Tabs>

## Session State
When a call is joined, an `UltravoxSessionState` is returned. This object returns the current status, can be used to get text transcripts of the call, and surfaces debug messages that are helpful when building your application.

### Status
The session status is based on the `UltravoxSessionStatus` enum and can be one of the following:

| status        | description                                 |
|-------------- | ------------------------------------------- |
| disconnected | Session is not connected. This is the initial state prior to joinCall. |
| disconnecting | Session is in the process of disconnecting. |
| connecting    | Session is establishing the connection.     |
| idle          | Session is connected but not yet active.      |
| listening     | Listening to the end user.                  |
| thinking      | The model is processing/thinking.           |
| speaking      | The model is speaking.                      |

#### Status Events
The status can be retrieved by adding an event listener to the state:

<Tabs syncKey="example-language">
  <TabItem label="JavaScript">
    ```js
    import { UltravoxSession } from 'ultravox-client';

    const session = new UltravoxSession();
    const state = await session.joinCall('wss://your-call-join-url');

    // Listen for status changing events
    state.addEventListener('ultravoxSessionStatusChanged', (event) => {
      console.log('Session status changed: ', event.state);
    });

    session.leaveCall();
    ```
  </TabItem>

  <TabItem label="Flutter">
    ```dart
    import 'package:ultravox_client/ultravox_client.dart';

    UltravoxSession session = UltravoxSession.create();
    UltravoxSessionState state = await _session.joinCall('wss://your-call-join-url');
    state.addListener(() {
      print('Status is now ${state.status}');
    })
    await session.leaveCall();

    ```
  </TabItem>

  <TabItem label="Kotlin">
    ```kotlin
    import ai.ultravox.UltravoxSession

    val session = UltravoxSession()
    val sessionState = session.joinCall("wss://your-call-join-url")

    sessionState.addEventHandler("ultravoxSessionStatusChanged") { event ->
      println("Session status changed: ${event.state}")
    }

    session.leaveCall()
    ```
  </TabItem>

  <TabItem label="Python">
    ```python
    import asyncio
    import ultravox_client as uv

    session = uv.UltravoxSession()
    state = await session.join_call("wss://your-call-join-url")

    # Listen for status changing events
    def on_status_changed(event):
        print('Session status changed:', event.state)

    state.add_event_listener('ultravox_session_status_changed', on_status_changed)

    await session.leave_call()
    ```
  </TabItem>
</Tabs>

### Transcripts
Sometimes you may want to augment the audio with text transcripts (e.g. if you want to show the end user the model's output in real-time). Transcripts can be retrieved by adding an event listener to state:

```javascript
import { UltravoxSession } from 'ultravox-client';

const session = new UltravoxSession();
const state = await session.joinCall('wss://your-call-join-url');

// Listen for transcripts changing events
state.addEventListener('ultravoxTranscriptsChanged', (event) => {
  console.log('Transcripts updated: ', event.transcripts);
  console.log('Current session status: ', event.state); // Session status is also available on the event
});

session.leaveCall();
```

Transcripts are an array of transcript objects. Each transcript has the following properties:

| property | type    | definition                                                                                                                |
| -------- | ------- | ------------------------------------------------------------------------------------------------------------------------- |
| text     | string  | Text transcript of the speech from the end user or the agent.                                                             |
| isFinal  | boolean | True if the transcript represents a complete utterance. False if it is a fragment of an utterance that is still underway. |
| speaker  | Role    | Either "user" or "agent". Denotes who was speaking.                                                                       |
| medium   | Medium  | Either "voice" or "text". Denotes how the message was sent.                                                               |

### Debug Messages
The state object also provides debug messages. Debug messages must be enabled when creating the `UltravoxSession` and then are available via an event listener similar to status and transcripts:

```javascript
import { UltravoxSession } from 'ultravox-client';

const debugMessages = new Set(["debug"]);
const session = new UltravoxSession({ experimentalMessages: debugMessages });
const state = await session.joinCall('wss://your-call-join-url');

// Listen for debug messages
state.addEventListener('ultravoxExperimentalMessage', (msg) => {
  console.log('Got a debug message: ', JSON.stringify(msg));
});

session.leaveCall();
```

## SDK Implementations

<SDKCards />
